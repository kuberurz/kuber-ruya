<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KUBER RÃœYA â€” RÃ¼ya & Fal</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --void: #04030a;
    --deep: #0d0920;
    --mid: #1a1035;
    --gold: #c9a84c;
    --gold-light: #e8cc80;
    --rose: #a05060;
    --rose-light: #d4788a;
    --silver: #b8b0cc;
    --text: #e8e0f0;
    --muted: #7a6e90;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--void);
    color: var(--text);
    font-family: 'Cormorant Garamond', serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  .stars {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
  }
  .star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: twinkle var(--d) ease-in-out infinite;
    animation-delay: var(--delay);
  }
  @keyframes twinkle {
    0%, 100% { opacity: 0.1; transform: scale(1); }
    50% { opacity: 0.9; transform: scale(1.4); }
  }

  .nebula {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    background:
      radial-gradient(ellipse 60% 40% at 20% 30%, rgba(80,40,120,0.25) 0%, transparent 70%),
      radial-gradient(ellipse 50% 60% at 80% 70%, rgba(160,80,96,0.15) 0%, transparent 70%),
      radial-gradient(ellipse 80% 50% at 50% 100%, rgba(13,9,32,0.8) 0%, transparent 70%);
    pointer-events: none;
  }

  header {
    position: relative;
    z-index: 10;
    text-align: center;
    padding: 50px 20px 30px;
  }

  .logo-symbol {
    font-size: 2.5rem;
    animation: float 4s ease-in-out infinite;
    display: block;
    margin-bottom: 8px;
  }
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }

  .logo-title {
    font-family: 'Cinzel', serif;
    font-size: clamp(2rem, 6vw, 3.2rem);
    font-weight: 600;
    letter-spacing: 0.25em;
    background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 40%, var(--rose-light) 70%, var(--gold) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 6px;
  }

  .logo-subtitle {
    font-style: italic;
    font-size: 0.95rem;
    color: var(--muted);
    letter-spacing: 0.3em;
  }

  .header-divider {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin-top: 20px;
  }
  .header-divider::before,
  .header-divider::after {
    content: '';
    width: 60px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
  }
  .header-divider span { color: var(--gold); font-size: 1rem; }

  .tabs {
    position: relative;
    z-index: 10;
    display: flex;
    justify-content: center;
    margin: 0 16px 28px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(201,168,76,0.2);
    border-radius: 2px;
    padding: 4px;
    max-width: 480px;
    margin-left: auto;
    margin-right: auto;
  }

  .tab-btn {
    flex: 1;
    padding: 11px 8px;
    background: none;
    border: none;
    cursor: pointer;
    font-family: 'Cinzel', serif;
    font-size: 0.65rem;
    letter-spacing: 0.1em;
    color: var(--muted);
    transition: all 0.3s;
  }
  .tab-btn.active {
    color: var(--gold);
    background: rgba(201,168,76,0.1);
  }

  .main {
    position: relative;
    z-index: 10;
    max-width: 600px;
    margin: 0 auto;
    padding: 0 16px 80px;
  }

  .panel { display: none; animation: fadeIn 0.5s ease; }
  .panel.active { display: block; }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .input-card {
    background: linear-gradient(145deg, rgba(26,16,53,0.8), rgba(13,9,32,0.9));
    border: 1px solid rgba(201,168,76,0.2);
    border-radius: 2px;
    padding: 24px 20px;
    margin-bottom: 20px;
    position: relative;
    overflow: hidden;
  }
  .input-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
  }

  .input-label {
    font-family: 'Cinzel', serif;
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    color: var(--gold);
    text-transform: uppercase;
    margin-bottom: 10px;
    display: block;
  }

  textarea {
    width: 100%;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(184,176,204,0.15);
    border-radius: 1px;
    color: var(--text);
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.05rem;
    line-height: 1.7;
    padding: 14px;
    resize: none;
    outline: none;
    transition: border-color 0.3s;
    min-height: 120px;
    -webkit-appearance: none;
  }
  textarea:focus { border-color: rgba(201,168,76,0.4); }
  textarea::placeholder { color: var(--muted); font-style: italic; }

  .fortune-types {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    margin: 16px 0;
  }

  .fortune-type-btn {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(184,176,204,0.15);
    border-radius: 2px;
    padding: 12px 6px;
    cursor: pointer;
    text-align: center;
    transition: all 0.3s;
    color: var(--muted);
    font-family: 'Cormorant Garamond', serif;
    -webkit-tap-highlight-color: transparent;
  }
  .fortune-type-btn.selected {
    border-color: var(--gold);
    background: rgba(201,168,76,0.08);
    color: var(--gold-light);
  }
  .fortune-type-btn .icon { font-size: 1.5rem; display: block; margin-bottom: 3px; }
  .fortune-type-btn .label { font-size: 0.78rem; display: block; }

  .cta-btn {
    width: 100%;
    padding: 16px;
    background: linear-gradient(135deg, rgba(201,168,76,0.15), rgba(160,80,96,0.15));
    border: 1px solid var(--gold);
    border-radius: 2px;
    color: var(--gold-light);
    font-family: 'Cinzel', serif;
    font-size: 0.78rem;
    letter-spacing: 0.15em;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 16px;
    -webkit-tap-highlight-color: transparent;
  }
  .cta-btn:active { transform: scale(0.98); }
  .cta-btn:disabled { opacity: 0.5; cursor: not-allowed; }

  .loading {
    display: none;
    text-align: center;
    padding: 50px 20px;
  }
  .loading.show { display: block; }

  .crystal-ball {
    font-size: 3.5rem;
    display: block;
    animation: pulse 2s ease-in-out infinite;
    margin-bottom: 16px;
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); filter: drop-shadow(0 0 10px rgba(201,168,76,0.3)); }
    50% { transform: scale(1.1); filter: drop-shadow(0 0 25px rgba(201,168,76,0.7)); }
  }

  .loading-text {
    font-style: italic;
    color: var(--muted);
    font-size: 1rem;
    animation: fadeInOut 2s ease-in-out infinite;
  }
  @keyframes fadeInOut {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 1; }
  }

  .result-card {
    display: none;
    background: linear-gradient(145deg, rgba(26,16,53,0.9), rgba(13,9,32,0.95));
    border: 1px solid rgba(201,168,76,0.3);
    border-radius: 2px;
    overflow: hidden;
    animation: revealCard 0.8s ease;
  }
  .result-card.show { display: block; }
  @keyframes revealCard {
    from { opacity: 0; transform: translateY(20px) scale(0.98); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  .result-header {
    background: linear-gradient(135deg, rgba(201,168,76,0.1), rgba(160,80,96,0.08));
    border-bottom: 1px solid rgba(201,168,76,0.2);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .result-icon { font-size: 1.8rem; }
  .result-category {
    font-family: 'Cinzel', serif;
    font-size: 0.6rem;
    letter-spacing: 0.25em;
    color: var(--gold);
    text-transform: uppercase;
  }
  .result-title {
    font-size: 1.05rem;
    color: var(--text);
    font-style: italic;
    margin-top: 2px;
  }

  .result-body { padding: 24px 20px; }
  .result-text {
    font-size: 1.05rem;
    line-height: 1.85;
    color: var(--text);
  }

  /* KUBER cevap bÃ¶lÃ¼mleri */
  .k-section {
    margin-bottom: 22px;
    padding-bottom: 18px;
    border-bottom: 1px solid rgba(201,168,76,0.1);
  }
  .k-section:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
  }
  .k-section-title {
    font-family: 'Cinzel', serif;
    font-size: 0.72rem;
    letter-spacing: 0.18em;
    color: var(--gold);
    text-transform: uppercase;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 7px;
  }
  .k-section-title .k-emoji {
    font-size: 1.15rem;
  }
  .k-section p {
    font-size: 1.05rem;
    line-height: 1.9;
    color: var(--text);
    margin: 0;
    font-style: italic;
  }
  .k-highlight {
    color: var(--gold-light);
    font-style: normal;
    font-weight: 600;
  }
  .k-closing {
    margin-top: 22px;
    padding: 16px 18px;
    background: linear-gradient(135deg, rgba(201,168,76,0.07), rgba(160,80,96,0.05));
    border-left: 2px solid var(--gold);
    border-radius: 0 2px 2px 0;
    font-style: italic;
    color: var(--silver);
    font-size: 0.97rem;
    line-height: 1.8;
  }
  body.day-mode .k-section { border-bottom-color: rgba(138,101,0,0.15); }
  body.day-mode .k-closing {
    background: linear-gradient(135deg, rgba(138,101,0,0.08), rgba(155,45,58,0.05));
    border-left-color: var(--gold);
    color: var(--muted);
  }

  /* FOTOÄRAF YÃœKLEME */
  .photo-upload-area {
    margin: 16px 0;
    border: 1.5px dashed rgba(201,168,76,0.35);
    border-radius: 4px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    background: rgba(255,255,255,0.02);
  }
  .photo-upload-area:hover, .photo-upload-area.drag-over {
    border-color: var(--gold);
    background: rgba(201,168,76,0.05);
  }
  .photo-upload-area input[type="file"] {
    position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%;
  }
  .photo-upload-icon { font-size: 2rem; display: block; margin-bottom: 8px; }
  .photo-upload-label {
    font-family: 'Cinzel', serif;
    font-size: 0.65rem;
    letter-spacing: 0.15em;
    color: var(--gold);
    display: block;
    margin-bottom: 4px;
  }
  .photo-upload-sub {
    font-size: 0.8rem;
    color: var(--muted);
    font-style: italic;
  }
  .photo-preview-wrap {
    display: none;
    position: relative;
    margin: 12px 0;
    border-radius: 4px;
    overflow: hidden;
    border: 1px solid rgba(201,168,76,0.3);
  }
  .photo-preview-wrap.show { display: block; }
  .photo-preview-wrap img {
    width: 100%;
    max-height: 220px;
    object-fit: cover;
    display: block;
  }
  .photo-remove-btn {
    position: absolute;
    top: 8px; right: 8px;
    background: rgba(0,0,0,0.6);
    border: 1px solid rgba(255,255,255,0.2);
    color: #fff;
    border-radius: 50%;
    width: 28px; height: 28px;
    font-size: 0.8rem;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
  }
  .photo-remove-btn:hover { background: rgba(160,80,96,0.8); }
  body.day-mode .photo-upload-area {
    border-color: rgba(138,101,0,0.3);
    background: rgba(0,0,0,0.02);
  }

  /* GÃœNÃœN MESAJI â€” EKRAN GÃ–RÃœNTÃœSÃœ KARTI */
  .oracle-share-card {
    display: none;
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    background: linear-gradient(145deg, #0d0920, #1a1035, #0a0618);
    border: 1px solid rgba(201,168,76,0.4);
    margin-bottom: 16px;
  }
  .oracle-share-card.show { display: block; animation: revealCard 0.8s ease; }

  .oracle-share-bg {
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse 70% 50% at 50% 0%, rgba(201,168,76,0.12) 0%, transparent 60%),
      radial-gradient(ellipse 40% 60% at 10% 80%, rgba(160,80,96,0.1) 0%, transparent 60%),
      radial-gradient(ellipse 40% 40% at 90% 90%, rgba(80,40,120,0.1) 0%, transparent 60%);
    pointer-events: none;
  }
  .oracle-share-inner { position: relative; z-index: 1; padding: 28px 24px 22px; }

  .oracle-share-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
  }
  .oracle-share-brand {
    font-family: 'Cinzel', serif;
    font-size: 0.6rem;
    letter-spacing: 0.25em;
    color: rgba(201,168,76,0.6);
    text-transform: uppercase;
  }
  .oracle-share-date {
    font-size: 0.75rem;
    color: var(--muted);
    font-style: italic;
  }

  .oracle-share-title {
    font-family: 'Cinzel', serif;
    font-size: 0.72rem;
    letter-spacing: 0.2em;
    color: var(--rose-light);
    text-transform: uppercase;
    margin-bottom: 6px;
  }
  .oracle-share-headline {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(1.4rem, 4vw, 1.8rem);
    font-weight: 300;
    font-style: italic;
    color: var(--gold-light);
    line-height: 1.3;
    margin-bottom: 20px;
  }

  .oracle-share-divider {
    display: flex; align-items: center; gap: 12px;
    margin-bottom: 20px;
  }
  .oracle-share-divider::before, .oracle-share-divider::after {
    content: ''; flex: 1; height: 1px;
    background: linear-gradient(90deg, transparent, rgba(201,168,76,0.35), transparent);
  }
  .oracle-share-divider span { color: var(--gold); font-size: 0.7rem; }

  .oracle-share-sections { display: flex; flex-direction: column; gap: 14px; }
  .oracle-share-section {
    display: flex; gap: 12px; align-items: flex-start;
  }
  .oracle-share-section-icon {
    font-size: 1.3rem; flex-shrink: 0; margin-top: 1px;
  }
  .oracle-share-section-content {}
  .oracle-share-section-label {
    font-family: 'Cinzel', serif;
    font-size: 0.58rem;
    letter-spacing: 0.15em;
    color: var(--gold);
    text-transform: uppercase;
    margin-bottom: 3px;
  }
  .oracle-share-section-text {
    font-size: 0.95rem;
    line-height: 1.75;
    color: var(--text);
    font-style: italic;
  }

  .oracle-share-lucky {
    margin-top: 20px;
    padding: 14px 16px;
    background: rgba(201,168,76,0.07);
    border: 1px solid rgba(201,168,76,0.2);
    border-radius: 6px;
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 10px;
  }
  .oracle-lucky-item { text-align: center; }
  .oracle-lucky-label {
    font-family: 'Cinzel', serif;
    font-size: 0.55rem;
    letter-spacing: 0.12em;
    color: var(--muted);
    text-transform: uppercase;
    display: block;
    margin-bottom: 4px;
  }
  .oracle-lucky-value {
    font-size: 1.1rem;
    color: var(--gold-light);
    font-weight: 600;
  }

  .oracle-share-footer {
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid rgba(201,168,76,0.15);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .oracle-share-closing {
    font-style: italic;
    font-size: 0.88rem;
    color: var(--silver);
    flex: 1;
    padding-right: 12px;
    line-height: 1.6;
  }
  .oracle-share-logo {
    font-family: 'Cinzel', serif;
    font-size: 0.6rem;
    letter-spacing: 0.15em;
    color: rgba(201,168,76,0.5);
    text-align: right;
    white-space: nowrap;
  }

  .oracle-share-actions {
    display: flex; gap: 8px; margin-top: 12px;
  }
  .oracle-action-btn {
    flex: 1;
    padding: 10px;
    background: none;
    border: 1px solid rgba(201,168,76,0.25);
    border-radius: 2px;
    color: var(--gold);
    font-family: 'Cinzel', serif;
    font-size: 0.62rem;
    letter-spacing: 0.1em;
    cursor: pointer;
    transition: all 0.3s;
    -webkit-tap-highlight-color: transparent;
  }
  .oracle-action-btn:hover { background: rgba(201,168,76,0.08); }
  body.day-mode .oracle-share-card {
    background: linear-gradient(145deg, #ede5d0, #e0d4b8, #e8dcc0);
    border-color: rgba(138,101,0,0.4);
  }
  body.day-mode .oracle-share-bg {
    background:
      radial-gradient(ellipse 70% 50% at 50% 0%, rgba(138,101,0,0.1) 0%, transparent 60%),
      radial-gradient(ellipse 40% 60% at 10% 80%, rgba(155,45,58,0.07) 0%, transparent 60%);
  }
  body.day-mode .oracle-share-section-text { color: var(--text); }
  body.day-mode .oracle-share-lucky { background: rgba(138,101,0,0.06); border-color: rgba(138,101,0,0.2); }
  body.day-mode .oracle-action-btn { border-color: rgba(138,101,0,0.3); color: var(--gold); }

  .result-footer {
    border-top: 1px solid rgba(201,168,76,0.1);
    padding: 16px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
  }

  .result-tip {
    font-style: italic;
    font-size: 0.85rem;
    color: var(--muted);
  }

  .new-btn {
    padding: 9px 20px;
    background: none;
    border: 1px solid rgba(201,168,76,0.3);
    border-radius: 2px;
    color: var(--gold);
    font-family: 'Cinzel', serif;
    font-size: 0.65rem;
    letter-spacing: 0.12em;
    cursor: pointer;
    transition: all 0.3s;
    -webkit-tap-highlight-color: transparent;
  }

  .oracle-card {
    background: linear-gradient(145deg, rgba(26,16,53,0.6), rgba(13,9,32,0.8));
    border: 1px solid rgba(160,80,96,0.25);
    border-radius: 2px;
    padding: 28px 20px;
    text-align: center;
    position: relative;
    overflow: hidden;
    margin-bottom: 20px;
  }
  .oracle-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--rose-light), transparent);
  }

  .oracle-sign { font-size: 2.5rem; margin-bottom: 10px; display: block; }
  .oracle-title {
    font-family: 'Cinzel', serif;
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    color: var(--rose-light);
    text-transform: uppercase;
    margin-bottom: 14px;
  }
  .oracle-text {
    font-style: italic;
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--silver);
  }

  .error-msg {
    display: none;
    background: rgba(160,80,96,0.1);
    border: 1px solid rgba(160,80,96,0.3);
    padding: 14px 20px;
    border-radius: 2px;
    color: var(--rose-light);
    font-style: italic;
    text-align: center;
    margin-top: 14px;
    font-size: 0.95rem;
  }
  .error-msg.show { display: block; }

  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: var(--void); }
  ::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.2); border-radius: 3px; }

  /* GÃœNDÃœZ MODU */
  body.day-mode {
    --void: #f5f0e8;
    --deep: #ede5d0;
    --mid: #e0d4b8;
    --gold: #8a6500;
    --gold-light: #6b4e00;
    --rose: #7a2030;
    --rose-light: #9b2d3a;
    --silver: #3a3250;
    --text: #1a1030;
    --muted: #5a4e70;
  }
  body.day-mode { background: var(--void); }
  body.day-mode .nebula {
    background:
      radial-gradient(ellipse 60% 40% at 20% 30%, rgba(200,170,100,0.2) 0%, transparent 70%),
      radial-gradient(ellipse 50% 60% at 80% 70%, rgba(180,120,130,0.15) 0%, transparent 70%),
      radial-gradient(ellipse 80% 50% at 50% 100%, rgba(240,230,210,0.6) 0%, transparent 70%);
  }
  body.day-mode .star { background: #8a6500; opacity: 0.3; }
  body.day-mode .input-card {
    background: linear-gradient(145deg, rgba(235,220,185,0.95), rgba(225,210,170,0.98));
    border-color: rgba(138,101,0,0.35);
  }
  body.day-mode textarea {
    background: rgba(255,250,240,0.8);
    border-color: rgba(138,101,0,0.2);
    color: var(--text);
  }
  body.day-mode .tabs {
    background: rgba(0,0,0,0.04);
    border-color: rgba(138,101,0,0.3);
  }
  body.day-mode .tab-btn.active { background: rgba(138,101,0,0.12); }
  body.day-mode .result-card {
    background: linear-gradient(145deg, rgba(235,220,185,0.97), rgba(225,210,170,0.99));
    border-color: rgba(138,101,0,0.4);
  }
  body.day-mode .result-header {
    background: linear-gradient(135deg, rgba(138,101,0,0.12), rgba(155,45,58,0.08));
    border-bottom-color: rgba(138,101,0,0.25);
  }
  body.day-mode .oracle-card {
    background: linear-gradient(145deg, rgba(235,220,185,0.8), rgba(225,210,170,0.9));
    border-color: rgba(155,45,58,0.3);
  }
  body.day-mode .fortune-type-btn {
    background: rgba(255,250,240,0.6);
    border-color: rgba(138,101,0,0.2);
    color: var(--muted);
  }
  body.day-mode .fortune-type-btn.selected {
    background: rgba(138,101,0,0.1);
    border-color: var(--gold);
    color: var(--gold-light);
  }
  body.day-mode .cta-btn {
    background: linear-gradient(135deg, rgba(138,101,0,0.15), rgba(155,45,58,0.12));
    border-color: var(--gold);
    color: var(--gold-light);
  }
  body.day-mode .logo-title {
    background: linear-gradient(135deg, #8a6500 0%, #6b4e00 40%, #9b2d3a 70%, #8a6500 100%);
    -webkit-background-clip: text;
    background-clip: text;
  }

  /* TEMA TOGGLE */
  .theme-toggle {
    position: fixed;
    top: 14px;
    right: 16px;
    z-index: 100;
    background: rgba(255,255,255,0.07);
    border: 1px solid rgba(201,168,76,0.3);
    border-radius: 20px;
    padding: 7px 14px;
    cursor: pointer;
    font-size: 0.75rem;
    color: var(--gold);
    font-family: 'Cinzel', serif;
    letter-spacing: 0.05em;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 6px;
    -webkit-tap-highlight-color: transparent;
  }
  body.day-mode .theme-toggle {
    background: rgba(0,0,0,0.06);
    border-color: rgba(138,101,0,0.35);
    color: var(--gold);
  }
</style>
</head>
<body>

<button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">ğŸŒ™ Gece</button>

<div class="nebula"></div>
<div class="stars" id="stars"></div>

<header>
  <span class="logo-symbol">ğŸŒ™</span>
  <h1 class="logo-title">KUBER RÃœYA</h1>
  <p class="logo-subtitle">RÃ¼ya Tabiri & Fal Rehberi</p>
  <div class="header-divider"><span>âœ¦</span></div>
</header>

<div class="tabs">
  <button class="tab-btn active" onclick="switchTab('ruya', this)">âœ¦ RÃœYA</button>
  <button class="tab-btn" onclick="switchTab('fal', this)">â˜½ FAL</button>
  <button class="tab-btn" onclick="switchTab('oracle', this)">â˜… GÃœNÃœN MESAJI</button>
</div>

<main class="main">

  <!-- RÃœYA TABÄ°RÄ° -->
  <div class="panel active" id="panel-ruya">
    <div class="input-card">
      <label class="input-label">âœ¦ RÃ¼yanÄ± Anlat</label>
      <textarea id="ruya-input" rows="5" placeholder="Bu gece gÃ¶rdÃ¼ÄŸÃ¼n rÃ¼yayÄ± ayrÄ±ntÄ±larÄ±yla anlat... Ne hissettin, kimler vardÄ±, ne gÃ¶rdÃ¼n?"></textarea>
      <button class="cta-btn" onclick="tabir('ruya')" id="ruya-btn">âœ¦ RÃœYAMI TABÄ°R ET âœ¦</button>
    </div>
    <div class="loading" id="ruya-loading">
      <span class="crystal-ball">ğŸ”®</span>
      <p class="loading-text">RÃ¼yanÄ±n sÄ±rlarÄ±na dalÄ±yorum...</p>
    </div>
    <div class="error-msg" id="ruya-error"></div>
    <div class="result-card" id="ruya-result">
      <div class="result-header">
        <div class="result-icon">ğŸŒ™</div>
        <div>
          <div class="result-category">RÃ¼ya Tabiri</div>
          <div class="result-title">Gece MesajÄ±</div>
        </div>
      </div>
      <div class="result-body">
        <div class="result-text" id="ruya-result-text"></div>
      </div>
      <div class="result-footer">
        <span class="result-tip">âœ¦ RÃ¼yalar ruhun dili ile konuÅŸur</span>
        <button class="new-btn" onclick="resetPanel('ruya')">YENÄ° RÃœYA</button>
      </div>
    </div>
  </div>

  <!-- FAL -->
  <div class="panel" id="panel-fal">
    <div class="input-card">
      <label class="input-label">â˜½ Fal TÃ¼rÃ¼nÃ¼ SeÃ§</label>
      <div class="fortune-types">
        <button class="fortune-type-btn selected" data-type="kahve" onclick="selectFalType(this)">
          <span class="icon">â˜•</span><span class="label">Kahve FalÄ±</span>
        </button>
        <button class="fortune-type-btn" data-type="el" onclick="selectFalType(this)">
          <span class="icon">ğŸ¤²</span><span class="label">El FalÄ±</span>
        </button>
        <button class="fortune-type-btn" data-type="yÄ±ldÄ±z" onclick="selectFalType(this)">
          <span class="icon">â­</span><span class="label">YÄ±ldÄ±z FalÄ±</span>
        </button>
        <button class="fortune-type-btn" data-type="genel" onclick="selectFalType(this)">
          <span class="icon">ğŸŒŸ</span><span class="label">Genel Fal</span>
        </button>
      </div>
      <label class="input-label" style="margin-top:16px;">â˜½ AklÄ±ndaki Konu</label>
      <textarea id="fal-input" rows="3" placeholder="AÅŸk mÄ±, kariyer mi, para mÄ±? AklÄ±ndaki soruyu yaz... Ya da boÅŸ bÄ±rakÄ±rsan kader yÃ¶nlendirir."></textarea>

      <label class="input-label" style="margin-top:16px;">ğŸ“¸ FotoÄŸraf YÃ¼kle (Ä°steÄŸe BaÄŸlÄ±)</label>
      <div class="photo-preview-wrap" id="fal-photo-preview">
        <img id="fal-photo-img" src="" alt="YÃ¼klenen fotoÄŸraf">
        <button class="photo-remove-btn" onclick="removePhoto()" title="FotoÄŸrafÄ± kaldÄ±r">âœ•</button>
      </div>
      <div class="photo-upload-area" id="fal-upload-area">
        <input type="file" accept="image/*" onchange="handlePhotoUpload(event)" id="fal-photo-input">
        <span class="photo-upload-icon">ğŸ“·</span>
        <span class="photo-upload-label">FotoÄŸraf YÃ¼kle</span>
        <span class="photo-upload-sub">Kahve telvesi, el ayasÄ±, yÄ±ldÄ±z haritasÄ±...</span>
      </div>

      <button class="cta-btn" onclick="tabir('fal')" id="fal-btn">â˜½ FALIMA BAK â˜½</button>
    </div>
    <div class="loading" id="fal-loading">
      <span class="crystal-ball">â˜½</span>
      <p class="loading-text">YÄ±ldÄ±zlara soruyorum...</p>
    </div>
    <div class="error-msg" id="fal-error"></div>
    <div class="result-card" id="fal-result">
      <div class="result-header">
        <div class="result-icon" id="fal-result-icon">â˜•</div>
        <div>
          <div class="result-category" id="fal-result-category">Kahve FalÄ±</div>
          <div class="result-title">Kaderin Sesi</div>
        </div>
      </div>
      <div class="result-body">
        <div class="result-text" id="fal-result-text"></div>
      </div>
      <div class="result-footer">
        <span class="result-tip">â˜½ Evrenin sÄ±rlarÄ± sende saklÄ±</span>
        <button class="new-btn" onclick="resetPanel('fal')">YENÄ° FAL</button>
      </div>
    </div>
  </div>

  <!-- GÃœNÃœN MESAJI -->
  <div class="panel" id="panel-oracle">
    <div class="oracle-card">
      <span class="oracle-sign">âœ¨</span>
      <div class="oracle-title">GÃ¼nÃ¼n Kozmik MesajÄ±</div>
      <div class="oracle-text">Evren sana bugÃ¼n ne sÃ¶ylemek istiyor?</div>
    </div>
    <div class="input-card">
      <label class="input-label">â˜… BugÃ¼n NasÄ±l Hissediyorsun?</label>
      <textarea id="oracle-input" rows="3" placeholder="BugÃ¼nkÃ¼ ruh halini, kaygÄ±larÄ±nÄ± veya hayallerini kÄ±saca paylaÅŸ..."></textarea>
      <button class="cta-btn" onclick="tabir('oracle')" id="oracle-btn">â˜… GÃœNÃœMÃœN ENERJÄ°SÄ°NÄ° AL â˜…</button>
    </div>
    <div class="loading" id="oracle-loading">
      <span class="crystal-ball">âœ¨</span>
      <p class="loading-text">Evrenle baÄŸlantÄ± kuruyorum...</p>
    </div>
    <div class="error-msg" id="oracle-error"></div>

    <!-- PAYLAÅIM KARTI -->
    <div class="oracle-share-card" id="oracle-result">
      <div class="oracle-share-bg"></div>
      <div class="oracle-share-inner" id="oracle-share-inner">
        <div class="oracle-share-top">
          <div class="oracle-share-brand">âœ¦ KUBER RÃœYA</div>
          <div class="oracle-share-date" id="oracle-date"></div>
        </div>
        <div class="oracle-share-title">â˜… GÃ¼nÃ¼n Kozmik MesajÄ±</div>
        <div class="oracle-share-headline" id="oracle-headline">Evrenin sana bugÃ¼n bir sÄ±rrÄ± var...</div>
        <div class="oracle-share-divider"><span>âœ¦</span></div>
        <div class="oracle-share-sections" id="oracle-sections"></div>
        <div class="oracle-share-lucky" id="oracle-lucky"></div>
        <div class="oracle-share-footer">
          <div class="oracle-share-closing" id="oracle-closing"></div>
          <div class="oracle-share-logo">KUBER<br>RÃœYA</div>
        </div>
      </div>
    </div>
    <div class="oracle-share-actions" id="oracle-actions" style="display:none;">
      <button class="oracle-action-btn" onclick="resetPanel('oracle')">â˜… YENÄ°DEN AL</button>
      <button class="oracle-action-btn" onclick="shareOracle()">â†— PAYLAÅ</button>
    </div>
  </div>

</main>

<script>
// YÄ±ldÄ±z efekti
const starsContainer = document.getElementById('stars');
for (let i = 0; i < 100; i++) {
  const star = document.createElement('div');
  star.className = 'star';
  const size = Math.random() * 2.5 + 0.5;
  star.style.cssText = `width:${size}px;height:${size}px;top:${Math.random()*100}%;left:${Math.random()*100}%;--d:${Math.random()*3+2}s;--delay:${Math.random()*4}s;`;
  starsContainer.appendChild(star);
}

let selectedFalType = 'kahve';
let uploadedPhotoBase64 = null;
const falTypeIcons = { kahve:'â˜•', el:'ğŸ¤²', yÄ±ldÄ±z:'â­', genel:'ğŸŒŸ' };
const falTypeNames = { kahve:'Kahve FalÄ±', el:'El FalÄ±', yÄ±ldÄ±z:'YÄ±ldÄ±z FalÄ±', genel:'Genel Fal' };

function handlePhotoUpload(event) {
  const file = event.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = (e) => {
    uploadedPhotoBase64 = e.target.result.split(',')[1];
    document.getElementById('fal-photo-img').src = e.target.result;
    document.getElementById('fal-photo-preview').classList.add('show');
    document.getElementById('fal-upload-area').style.display = 'none';
  };
  reader.readAsDataURL(file);
}

function removePhoto() {
  uploadedPhotoBase64 = null;
  document.getElementById('fal-photo-input').value = '';
  document.getElementById('fal-photo-preview').classList.remove('show');
  document.getElementById('fal-upload-area').style.display = 'block';
}

function shareOracle() {
  if (navigator.share) {
    navigator.share({ title: 'KUBER RÃœYA â€” GÃ¼nÃ¼n MesajÄ±', text: 'KUBER bana bugÃ¼nÃ¼n mesajÄ±nÄ± sÃ¶yledi! kuberruya.com' });
  } else {
    navigator.clipboard?.writeText('KUBER RÃœYA â€” GÃ¼nÃ¼n MesajÄ±: kuberruya.com').then(() => alert('Link kopyalandÄ±!'));
  }
}

function toggleTheme() {
  const body = document.body;
  const btn = document.getElementById('themeBtn');
  if (body.classList.contains('day-mode')) {
    body.classList.remove('day-mode');
    btn.textContent = 'ğŸŒ™ Gece';
  } else {
    body.classList.add('day-mode');
    btn.textContent = 'â˜€ï¸ GÃ¼ndÃ¼z';
  }
}

function switchTab(tab, btn) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('panel-' + tab).classList.add('active');
}

function selectFalType(btn) {
  document.querySelectorAll('.fortune-type-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  selectedFalType = btn.dataset.type;
  document.getElementById('fal-result-icon').textContent = falTypeIcons[selectedFalType];
  document.getElementById('fal-result-category').textContent = falTypeNames[selectedFalType];
}

function resetPanel(type) {
  document.getElementById(type + '-result').classList.remove('show');
  if (type === 'oracle') {
    document.getElementById('oracle-actions').style.display = 'none';
  }
  if (type === 'fal') removePhoto();
  if (document.getElementById(type + '-input')) document.getElementById(type + '-input').value = '';
  document.getElementById(type + '-error').classList.remove('show');
}

async function tabir(type) {
  const input = document.getElementById(type + '-input') ? document.getElementById(type + '-input').value.trim() : '';
  const btn = document.getElementById(type + '-btn');
  const loading = document.getElementById(type + '-loading');
  const result = document.getElementById(type + '-result');
  const error = document.getElementById(type + '-error');

  result.classList.remove('show');
  error.classList.remove('show');

  const htmlFormat = `
YanÄ±tÄ±nÄ± YALNIZCA aÅŸaÄŸÄ±daki HTML yapÄ±sÄ±nda ver. Parantez iÃ§indeki yÃ¶nergeleri sil, gerÃ§ek iÃ§erik yaz. BaÅŸka hiÃ§bir ÅŸey ekleme:

[BÃ–LÃœM_1]
[BÃ–LÃœM_2]
[BÃ–LÃœM_3]
[BÃ–LÃœM_4]
<div class="k-closing">[GÃ¼Ã§lÃ¼, ilham verici kapanÄ±ÅŸ â€” "Ben KUBER olarak..." ile baÅŸla. 1-2 cÃ¼mle.]</div>

Her bÃ¶lÃ¼m bu formatta:
<div class="k-section">
<div class="k-section-title"><span class="k-emoji">[EMOJÄ°]</span> [BAÅLIK]</div>
<p>[Ä°Ã§erik â€” 2-3 cÃ¼mle, mistik ve akÄ±cÄ±]</p>
</div>`;

  let prompt = '';
  let requestBody = {};

  if (type === 'ruya') {
    if (!input) { showError(type, 'LÃ¼tfen rÃ¼yanÄ± anlat, ardÄ±ndan tabir edeyim...'); return; }
    prompt = `Sen KUBER'sin â€” kadim ve gizemli bir rÃ¼ya yorumcusu. TÃ¼rk kÃ¼ltÃ¼rÃ¼ ile evrensel sembolizmi harmanlar, derin ve ilham verici tabirler yaparsÄ±n.

KullanÄ±cÄ±nÄ±n rÃ¼yasÄ±: "${input}"

${htmlFormat.replace('[BÃ–LÃœM_1]', `<div class="k-section">
<div class="k-section-title"><span class="k-emoji">ğŸ”®</span> Sembollerin Dili</div>
<p>[RÃ¼yadaki ana nesneler ve karakterlerin mistik anlamÄ±nÄ± aÃ§Ä±kla]</p>
</div>`).replace('[BÃ–LÃœM_2]', `<div class="k-section">
<div class="k-section-title"><span class="k-emoji">ğŸŒŠ</span> BilinÃ§altÄ±nÄ±n Sesi</div>
<p>[RÃ¼yanÄ±n bilinÃ§altÄ±ndaki derin duygusal mesajÄ±]</p>
</div>`).replace('[BÃ–LÃœM_3]', `<div class="k-section">
<div class="k-section-title"><span class="k-emoji">ğŸŒ™</span> YakÄ±n Gelecek</div>
<p>[RÃ¼yanÄ±n yakÄ±n gelecek iÃ§in verdiÄŸi iÅŸaretler ve ipuÃ§larÄ±]</p>
</div>`).replace('[BÃ–LÃœM_4]', `<div class="k-section">
<div class="k-section-title"><span class="k-emoji">âœ¨</span> Ruhsal Mesaj</div>
<p>[Evrensel ve ruhsal anlam katmanÄ±]</p>
</div>`)}

TÃ¼m iÃ§erik TÃ¼rkÃ§e.`;
    requestBody = { prompt };

  } else if (type === 'fal') {
    const topic = input || 'genel hayat, aÅŸk ve kariyer';
    const falEmojis = { kahve:'â˜•', el:'ğŸ¤²', yÄ±ldÄ±z:'â­', genel:'ğŸŒŸ' };
    const photoNote = uploadedPhotoBase64
      ? `\nKullanÄ±cÄ± bir fotoÄŸraf yÃ¼kledi. FotoÄŸrafÄ± dikkatlice analiz et ve falÄ± buna gÃ¶re yorumla â€” gÃ¶rseldeki ÅŸekilleri, sembolleri ve desenleri bul.`
      : '';

    prompt = `Sen KUBER'sin â€” ${falTypeNames[selectedFalType]} konusunda derin bilgiye sahip gizemli bir fal ustasÄ±.${photoNote}

KullanÄ±cÄ±nÄ±n konusu: "${topic}"
Fal tÃ¼rÃ¼: ${falTypeNames[selectedFalType]}

${htmlFormat.replace('[BÃ–LÃœM_1]', `<div class="k-section">
<div class="k-section-title"><span class="k-emoji">ğŸ•°ï¸</span> GeÃ§miÅŸten Gelen</div>
<p>[GeÃ§miÅŸten gelen etkiler ve bu falda ne gÃ¶rÃ¼ndÃ¼ÄŸÃ¼]</p>
</div>`).replace('[BÃ–LÃœM_2]', `<div class="k-section">
<div class="k-section-title"><span class="k-emoji">${falEmojis[selectedFalType] || 'ğŸ”®'}</span> Åimdiki Enerji</div>
<p>[Åu anki enerji ve ${falTypeNames[selectedFalType]}'na Ã¶zgÃ¼ semboller${uploadedPhotoBase64 ? ' â€” gÃ¶rselden okuduklarÄ±nÄ± da ekle' : ''}]</p>
</div>`).replace('[BÃ–LÃœM_3]', `<div class="k-section">
<div class="k-section-title"><span class="k-emoji">ğŸ’«</span> AÅŸk & Ä°liÅŸkiler</div>
<p>[AÅŸk ve iliÅŸkiler hakkÄ±nda fal yorumu]</p>
</div>`).replace('[BÃ–LÃœM_4]', `<div class="k-section">
<div class="k-section-title"><span class="k-emoji">ğŸŒŸ</span> Kariyer & Bereket</div>
<p>[Kariyer ve maddi konular hakkÄ±nda mesaj]</p>
</div>`)}

TÃ¼m iÃ§erik TÃ¼rkÃ§e.`;

    requestBody = { prompt };
    if (uploadedPhotoBase64) {
      const imgEl = document.getElementById('fal-photo-img');
      const src = imgEl.src;
      const mimeMatch = src.match(/data:([^;]+);/);
      requestBody.image = uploadedPhotoBase64;
      requestBody.imageType = mimeMatch ? mimeMatch[1] : 'image/jpeg';
    }

  } else {
    // ORACLE â€” JSON formatÄ±nda dÃ¶nsÃ¼n, ÅŸÄ±k karta render edeceÄŸiz
    const mood = input || 'merak dolu ve hayata aÃ§Ä±k';
    prompt = `Sen KUBER'sin â€” kozmik enerjileri okuyan gizemli bir rehber.

KullanÄ±cÄ±nÄ±n bugÃ¼nkÃ¼ hali: "${mood}"

YanÄ±tÄ±nÄ± YALNIZCA aÅŸaÄŸÄ±daki JSON formatÄ±nda ver. BaÅŸka hiÃ§bir ÅŸey yazma, sadece JSON:
{
  "baslik": "[BugÃ¼nÃ¼n enerjisini Ã¶zetleyen kÄ±sa, ÅŸiirsel bir baÅŸlÄ±k â€” 5-8 kelime, TÃ¼rkÃ§e]",
  "enerji": "[GÃ¼nÃ¼n kozmik enerjisi, hangi gezegen/burÃ§ etkili â€” 2 cÃ¼mle, TÃ¼rkÃ§e]",
  "eylem": "[BugÃ¼n yapÄ±lmasÄ± gereken eylem + kaÃ§Ä±nÄ±lmasÄ± gereken ÅŸey â€” 2 cÃ¼mle, TÃ¼rkÃ§e]",
  "mesaj": "[GÃ¼Ã§lÃ¼ motivasyon ve ilham mesajÄ± â€” 2 cÃ¼mle, KUBER olarak konuÅŸ, TÃ¼rkÃ§e]",
  "sans_renk": "[ÅanslÄ± renk adÄ±]",
  "sans_sayi": "[ÅanslÄ± sayÄ±]",
  "sans_sembol": "[ÅanslÄ± sembol veya nesme adÄ±]",
  "kapanis": "[Ben KUBER olarak... diye baÅŸlayan ilham verici kapanÄ±ÅŸ â€” 1-2 cÃ¼mle, TÃ¼rkÃ§e]"
}`;
    requestBody = { prompt };
  }

  btn.disabled = true;
  loading.classList.add('show');

  try {
    const response = await fetch('/api/ask', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(requestBody)
    });
    const data = await response.json();
    if (!response.ok) throw new Error(data.error || 'Bir hata oluÅŸtu');

    const text = data.result || '';
    loading.classList.remove('show');

    if (type === 'oracle') {
      // JSON parse edip ÅŸÄ±k karta render et
      try {
        const clean = text.replace(/```json|```/g, '').trim();
        const d = JSON.parse(clean);

        // Tarihi yaz
        const now = new Date();
        document.getElementById('oracle-date').textContent =
          now.toLocaleDateString('tr-TR', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });

        // BaÅŸlÄ±k
        document.getElementById('oracle-headline').textContent = d.baslik || '';

        // BÃ¶lÃ¼mler
        document.getElementById('oracle-sections').innerHTML = `
          <div class="oracle-share-section">
            <div class="oracle-share-section-icon">ğŸŒ…</div>
            <div class="oracle-share-section-content">
              <div class="oracle-share-section-label">GÃ¼nÃ¼n Enerjisi</div>
              <div class="oracle-share-section-text">${d.enerji || ''}</div>
            </div>
          </div>
          <div class="oracle-share-section">
            <div class="oracle-share-section-icon">âš¡</div>
            <div class="oracle-share-section-content">
              <div class="oracle-share-section-label">BugÃ¼n & KaÃ§Ä±n</div>
              <div class="oracle-share-section-text">${d.eylem || ''}</div>
            </div>
          </div>
          <div class="oracle-share-section">
            <div class="oracle-share-section-icon">ğŸ”¥</div>
            <div class="oracle-share-section-content">
              <div class="oracle-share-section-label">GÃ¼Ã§ MesajÄ±</div>
              <div class="oracle-share-section-text">${d.mesaj || ''}</div>
            </div>
          </div>
        `;

        // Åans sembolleri
        document.getElementById('oracle-lucky').innerHTML = `
          <div class="oracle-lucky-item">
            <span class="oracle-lucky-label">ğŸ¨ Renk</span>
            <span class="oracle-lucky-value">${d.sans_renk || ''}</span>
          </div>
          <div class="oracle-lucky-item">
            <span class="oracle-lucky-label">ğŸ”¢ SayÄ±</span>
            <span class="oracle-lucky-value">${d.sans_sayi || ''}</span>
          </div>
          <div class="oracle-lucky-item">
            <span class="oracle-lucky-label">âœ¨ Sembol</span>
            <span class="oracle-lucky-value">${d.sans_sembol || ''}</span>
          </div>
        `;

        // KapanÄ±ÅŸ
        document.getElementById('oracle-closing').textContent = d.kapanis || '';

      } catch(e) {
        // JSON parse baÅŸarÄ±sÄ±z olursa plain text gÃ¶ster
        document.getElementById('oracle-headline').textContent = 'Evrenin sana bugÃ¼n bir mesajÄ± var...';
        document.getElementById('oracle-sections').innerHTML = `<div class="oracle-share-section-text" style="font-style:italic;color:var(--text)">${text}</div>`;
        document.getElementById('oracle-lucky').innerHTML = '';
        document.getElementById('oracle-closing').textContent = '';
      }

      result.classList.add('show');
      document.getElementById('oracle-actions').style.display = 'flex';
    } else {
      document.getElementById(type + '-result-text').innerHTML = text;
      result.classList.add('show');
    }

    result.scrollIntoView({ behavior: 'smooth', block: 'start' });
  } catch (err) {
    loading.classList.remove('show');
    showError(type, 'Mistik baÄŸlantÄ± kesildi. LÃ¼tfen tekrar dene... (' + err.message + ')');
  } finally {
    btn.disabled = false;
  }
}

function showError(type, msg) {
  const el = document.getElementById(type + '-error');
  el.textContent = msg;
  el.classList.add('show');
}
</script>
</body>
</html>
